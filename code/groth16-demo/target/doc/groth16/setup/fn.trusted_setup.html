<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Performs the trusted setup ceremony to generate proving and verification keys."><title>trusted_setup in groth16::setup - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="groth16" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../groth16/index.html">groth16</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In groth16::<wbr>setup</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">groth16</a>::<wbr><a href="index.html">setup</a>::<wbr><a class="fn" href="#">trusted_setup</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/groth16/setup.rs.html#69-213">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn trusted_setup&lt;R&gt;(
    a_polys: &amp;[<a class="struct" href="../../groth16_math/polynomial/struct.Polynomial.html" title="struct groth16_math::polynomial::Polynomial">Polynomial</a>&lt;Fq&gt;],
    b_polys: &amp;[<a class="struct" href="../../groth16_math/polynomial/struct.Polynomial.html" title="struct groth16_math::polynomial::Polynomial">Polynomial</a>&lt;Fq&gt;],
    c_polys: &amp;[<a class="struct" href="../../groth16_math/polynomial/struct.Polynomial.html" title="struct groth16_math::polynomial::Polynomial">Polynomial</a>&lt;Fq&gt;],
    num_inputs: <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.usize.html">usize</a>,
    rng: <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.reference.html">&amp;mut R</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.82.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="../keys/struct.ProvingKey.html" title="struct groth16::keys::ProvingKey">ProvingKey</a>, <a class="struct" href="../keys/struct.VerificationKey.html" title="struct groth16::keys::VerificationKey">VerificationKey</a>), <a class="enum" href="../error/enum.Groth16Error.html" title="enum groth16::error::Groth16Error">Groth16Error</a>&gt;<div class="where">where
    R: <a class="trait" href="https://rust-random.github.io/rand/rand/rng/trait.Rng.html" title="trait rand::rng::Rng">Rng</a>,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Performs the trusted setup ceremony to generate proving and verification keys.</p>
<h2 id="trusted-setup"><a class="doc-anchor" href="#trusted-setup">§</a>Trusted Setup</h2>
<p>The trusted setup generates random secrets (α, β, γ, δ) that are used to
encrypt the QAP polynomials. These secrets MUST be discarded after the ceremony
as they are “toxic waste” that could compromise the system’s soundness.</p>
<h2 id="process"><a class="doc-anchor" href="#process">§</a>Process</h2>
<ol>
<li>Generate random secrets: α, β, γ, δ in the scalar field</li>
<li>Generate random τ (tau) in the scalar field</li>
<li>Compute powers of τ: [1, τ, τ², …, τⁿ] encrypted in G1 and G2</li>
<li>Evaluate QAP polynomials at τ and encrypt with the secrets</li>
<li>Compute division polynomials and encrypt them</li>
<li>Compute public input verification coefficients</li>
</ol>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h2>
<ul>
<li><code>a_polys</code> - A-polynomials from QAP [A₀(x), …, Aₘ(x)]</li>
<li><code>b_polys</code> - B-polynomials from QAP [B₀(x), …, Bₘ(x)]</li>
<li><code>c_polys</code> - C-polynomials from QAP [C₀(x), …, Cₘ(x)]</li>
<li><code>num_inputs</code> - Number of public inputs (usually 1 for the constant 1)</li>
<li><code>rng</code> - Random number generator</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<ul>
<li><code>Ok((pk, vk))</code> - Proving key and verification key</li>
<li><code>Err(...)</code> - Error if setup fails</li>
</ul>
<h2 id="security-warning"><a class="doc-anchor" href="#security-warning">§</a>Security Warning</h2>
<p>The random secrets (α, β, γ, δ, τ) are “toxic waste” - they MUST be securely
deleted after this ceremony. If an attacker obtains these secrets, they can
forge proofs for any witness.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>groth16_groth16::setup::trusted_setup;
<span class="kw">use </span>groth16_qap::r1cs_to_qap;

<span class="comment">// Given R1CS constraints
</span><span class="kw">let </span>(a_polys, b_polys, c_polys) = r1cs_to_qap(<span class="kw-2">&amp;</span>constraints, num_vars)<span class="question-mark">?</span>;

<span class="comment">// Perform trusted setup
</span><span class="kw">let </span>(pk, vk) = trusted_setup(<span class="kw-2">&amp;</span>a_polys, <span class="kw-2">&amp;</span>b_polys, <span class="kw-2">&amp;</span>c_polys, <span class="number">1</span>, <span class="kw-2">&amp;mut </span>rng)<span class="question-mark">?</span>;

<span class="comment">// pk is used to generate proofs
// vk is used to verify proofs

// IMPORTANT: Securely delete all secrets (α, β, γ, δ, τ)</span></code></pre></div>
</div></details></section></div></main></body></html>