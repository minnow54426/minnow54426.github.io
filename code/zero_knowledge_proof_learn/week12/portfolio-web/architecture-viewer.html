<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Viewer | ZK-SNARK System Design</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        header nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .back-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 1rem 0;
        }

        main {
            padding: 3rem 2rem;
        }

        .intro {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--gray-50);
            border-radius: 8px;
        }

        .intro h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .intro p {
            font-size: 1.1rem;
            color: var(--gray-600);
            max-width: 700px;
            margin: 0 auto;
        }

        .toc {
            background: var(--gray-50);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 3rem;
            border-left: 4px solid var(--primary);
        }

        .toc h3 {
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .toc ul {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 0.5rem;
        }

        .toc a {
            color: var(--primary);
            text-decoration: none;
            padding: 0.5rem;
            display: block;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .toc a:hover,
        .toc a.active {
            background: var(--primary);
            color: white;
        }

        .diagram-section {
            margin-bottom: 4rem;
            padding: 2rem;
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.3s;
        }

        .diagram-section:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .diagram-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-200);
        }

        .diagram-header h3 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--gray-900);
        }

        .diagram-desc {
            color: var(--gray-600);
            font-style: italic;
        }

        .diagram-content {
            background: var(--gray-50);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            overflow-x: auto;
        }

        .mermaid-placeholder {
            background: white;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--gray-700);
            white-space: pre;
            overflow-x: auto;
        }

        .equation-display {
            background: white;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .equation {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .equation-term {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
        }

        .equation-op {
            color: var(--gray-600);
            font-weight: 600;
            font-size: 1.8rem;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        .comparison-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: var(--gray-50);
        }

        .diagram-explanation {
            background: var(--gray-50);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .diagram-explanation h4 {
            color: var(--gray-900);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .diagram-explanation ul,
        .diagram-explanation ol {
            margin-left: 1.5rem;
        }

        .diagram-explanation li {
            margin-bottom: 0.5rem;
        }

        .diagram-explanation strong {
            color: var(--primary);
        }

        .diagram-explanation p {
            margin-top: 1rem;
            color: var(--gray-600);
        }

        .diagram-nav {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
        }

        .prev-diagram,
        .next-diagram {
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
            font-weight: 500;
        }

        .prev-diagram:hover,
        .next-diagram:hover {
            background: var(--primary-dark);
        }

        .prev-diagram {
            background: var(--gray-600);
        }

        .prev-diagram:hover {
            background: var(--gray-700);
        }

        footer {
            background: var(--gray-50);
            padding: 2rem;
            text-align: center;
            border-top: 1px solid var(--gray-200);
        }

        footer p {
            color: var(--gray-600);
            margin-bottom: 1rem;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .diagram-section {
                padding: 1rem;
            }

            .diagram-header h3 {
                font-size: 1.4rem;
            }

            .toc ul {
                grid-template-columns: 1fr;
            }

            .equation {
                font-size: 1rem;
            }

            .diagram-nav {
                flex-direction: column;
            }

            .comparison-table {
                font-size: 0.85rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <a href="index.html" class="back-link">← Back to Portfolio</a>
            </nav>
            <h1>Architecture Viewer</h1>
            <p>Interactive visualization of ZK-SNARK system design</p>
        </header>

        <main>
            <section class="intro">
                <h2>ZK-SNARK System Architecture</h2>
                <p>Interactive diagrams showing the complete Groth16 implementation, from circuit definition to proof verification.</p>
            </section>

            <!-- Table of Contents -->
            <nav class="toc">
                <h3>Diagrams</h3>
                <ul>
                    <li><a href="#workspace-dependencies">1. Workspace Dependencies</a></li>
                    <li><a href="#data-flow">2. Data Flow: Circuit to Verification</a></li>
                    <li><a href="#crate-architecture">3. Crate Module Architecture</a></li>
                    <li><a href="#proof-sequence">4. Proof Generation Sequence</a></li>
                    <li><a href="#verification-equation">5. Verification Equation Structure</a></li>
                    <li><a href="#circuit-comparison">6. Circuit Examples Comparison</a></li>
                    <li><a href="#batch-verification">7. Batch Verification Architecture</a></li>
                </ul>
            </nav>

            <!-- Diagram 1: Workspace Dependencies -->
            <section id="workspace-dependencies" class="diagram-section">
                <div class="diagram-header">
                    <h3>1. Workspace Dependency Graph</h3>
                    <p class="diagram-desc">How different crates depend on each other in the implementation.</p>
                </div>

                <div class="diagram-content">
                    <pre class="mermaid-placeholder">
graph TD
    A[Our Implementation] --> B[arkworks-rs]
    B --> C[ark-ff: Finite Fields]
    B --> D[ark-ec: Elliptic Curves]
    B --> E[ark-poly: Polynomials]
    B --> F[ark-bn254: Pairing Curve]
    B --> G[ark-groth16: Reference Impl]
    B --> H[ark-relations: R1CS Traits]

    style A fill:#e1f5ff
    style B fill:#fff3e0
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Key Components</h4>
                    <ul>
                        <li><strong>Our Implementation:</strong> The crates we built (math, r1cs, qap, groth16, circuits)</li>
                        <li><strong>arkworks-rs:</strong> Production-ready cryptography library providing all primitives</li>
                        <li><strong>ark-ff:</strong> Finite field operations (arithmetic modulo prime)</li>
                        <li><strong>ark-ec:</strong> Elliptic curve point operations</li>
                        <li><strong>ark-poly:</strong> Polynomial interpolation and FFT</li>
                    </ul>
                </div>

                <div class="diagram-nav">
                    <span></span>
                    <a href="#data-flow" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 2: Data Flow -->
            <section id="data-flow" class="diagram-section">
                <div class="diagram-header">
                    <h3>2. Data Flow: Circuit to Verification</h3>
                    <p class="diagram-desc">The complete journey from defining a circuit to verifying a proof.</p>
                </div>

                <div class="diagram-content">
                    <pre class="mermaid-placeholder">
sequenceDiagram
    participant Dev as Developer
    participant Circuit as Circuit Definition
    participant Setup as Trusted Setup
    participant Prover as Prover
    participant Verifier as Verifier

    Dev->>Circuit: Define computation
    Circuit->>Setup: R1CS constraints
    Setup->>Setup: Generate PK/VK
    Setup->>Prover: Proving Key (PK)
    Setup->>Verifier: Verification Key (VK)

    Prover->>Prover: Create witness
    Prover->>Prover: Generate proof
    Prover->>Verifier: Proof + public inputs
    Verifier->>Verifier: Verify proof
    Verifier->>Dev: Accept/Reject
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Data Flow Steps</h4>
                    <ol>
                        <li><strong>Circuit Definition:</strong> Developer encodes computation as R1CS constraints</li>
                        <li><strong>Trusted Setup:</strong> Generate proving key (PK) and verification key (VK)</li>
                        <li><strong>Proof Generation:</strong> Prover uses PK + witness to create proof</li>
                        <li><strong>Verification:</strong> Verifier uses VK + proof + public inputs to verify</li>
                    </ol>
                </div>

                <div class="diagram-nav">
                    <a href="#workspace-dependencies" class="prev-diagram">← Previous</a>
                    <a href="#crate-architecture" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 3: Crate Architecture -->
            <section id="crate-architecture" class="diagram-section">
                <div class="diagram-header">
                    <h3>3. Crate Module Architecture</h3>
                    <p class="diagram-desc">Internal structure of each crate and their modules.</p>
                </div>

                <div class="diagram-content">
                    <pre class="mermaid-placeholder">
graph TD
    subgraph Math Crate
        M1[fields.rs]
        M2[pairing.rs]
        M3[polynomial.rs]
    end

    subgraph R1CS Crate
        R1[constraint.rs]
        R2[witness.rs]
    end

    subgraph QAP Crate
        Q1[polynomials.rs]
    end

    subgraph Groth16 Crate
        G1[setup.rs]
        G2[prove.rs]
        G3[verify.rs]
    end

    subgraph Circuits Crate
        C1[multiplier.rs]
        C2[cubic.rs]
        C3[hash_preimage.rs]
        C4[merkle.rs]
        C5[range_proof.rs]
    end
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Module Organization</h4>
                    <ul>
                        <li><strong>math/</strong>: Core mathematical primitives (fields, pairings, polynomials)</li>
                        <li><strong>r1cs/</strong>: Constraint system representation and witness generation</li>
                        <li><strong>qap/</strong>: R1CS to QAP transformation</li>
                        <li><strong>groth16/</strong>: Setup, prove, and verify algorithms</li>
                        <li><strong>circuits/</strong>: Example circuits demonstrating different use cases</li>
                    </ul>
                </div>

                <div class="diagram-nav">
                    <a href="#data-flow" class="prev-diagram">← Previous</a>
                    <a href="#proof-sequence" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 4: Proof Generation Sequence -->
            <section id="proof-sequence" class="diagram-section">
                <div class="diagram-header">
                    <h3>4. Proof Generation Sequence Diagram</h3>
                    <p class="diagram-desc">Detailed steps of the proof generation algorithm.</p>
                </div>

                <div class="diagram-content">
                    <pre class="mermaid-placeholder">
graph LR
    A[Witness w] --> B[R1CS Evaluation]
    B --> C[QAP Transformation]
    C --> D[Compute H x]
    D --> E[Evaluate at r]
    E --> F[Sample Blinding r s]
    F --> G[Compute A B C]
    G --> H[Proof]

    style A fill:#e1f5ff
    style H fill:#c8e6c9
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Algorithm Steps</h4>
                    <ol>
                        <li><strong>Witness Creation:</strong> Assign values to all variables</li>
                        <li><strong>R1CS Evaluation:</strong> Compute A·w, B·w, C·w for each constraint</li>
                        <li><strong>QAP Transform:</strong> Convert to polynomials using Lagrange interpolation</li>
                        <li><strong>Compute H(x):</strong> Divide A·B - C by target polynomial t(x)</li>
                        <li><strong>Evaluate at r:</strong> Sample random point from trusted setup</li>
                        <li><strong>Blinding:</strong> Add random factors r, s for zero-knowledge</li>
                        <li><strong>Compute Proof:</strong> Calculate A, B, C group elements</li>
                    </ol>
                </div>

                <div class="diagram-nav">
                    <a href="#crate-architecture" class="prev-diagram">← Previous</a>
                    <a href="#verification-equation" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 5: Verification Equation -->
            <section id="verification-equation" class="diagram-section">
                <div class="diagram-header">
                    <h3>5. Verification Equation Structure</h3>
                    <p class="diagram-desc">The pairing equation that verifies proof correctness.</p>
                </div>

                <div class="diagram-content">
                    <div class="equation-display">
                        <div class="equation">
                            <span class="equation-term">e(A, B)</span>
                            <span class="equation-op">=</span>
                            <span class="equation-term">e(α, β)</span>
                            <span class="equation-op">·</span>
                            <span class="equation-term">e(public·IC, γ)</span>
                            <span class="equation-op">·</span>
                            <span class="equation-term">e(C, δ)</span>
                        </div>
                    </div>
                    <pre class="mermaid-placeholder">
graph LR
    LHS[eA B]
    RHS1[eα β]
    RHS2[epublic IC γ]
    RHS3[eC δ]

    LHS --> Equals[=]
    RHS1 --> Mult1[×]
    RHS2 --> Mult1
    Mult1 --> Mult2[×]
    RHS3 --> Mult2
    Mult2 --> Equals

    style LHS fill:#e1f5ff
    style Equals fill:#c8e6c9
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Equation Components</h4>
                    <ul>
                        <li><strong>e(A, B):</strong> Pairing of proof elements A and B</li>
                        <li><strong>e(α, β):</strong> Pairing of setup parameters (verification key)</li>
                        <li><strong>e(public·IC, γ):</strong> Pairing of public inputs with input commitment matrix</li>
                        <li><strong>e(C, δ):</strong> Pairing of proof element C with setup parameter</li>
                    </ul>
                    <p><strong>Verification:</strong> If equation holds, proof is valid. Computationally infeasible to forge valid proof without knowing witness.</p>
                </div>

                <div class="diagram-nav">
                    <a href="#proof-sequence" class="prev-diagram">← Previous</a>
                    <a href="#circuit-comparison" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 6: Circuit Comparison -->
            <section id="circuit-comparison" class="diagram-section">
                <div class="diagram-header">
                    <h3>6. Circuit Examples Comparison</h3>
                    <p class="diagram-desc">Comparing different example circuits and their complexity.</p>
                </div>

                <div class="diagram-content">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Circuit</th>
                                <th>Constraints</th>
                                <th>Prover Time</th>
                                <th>Proof Size</th>
                                <th>Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Multiplier</td>
                                <td>3</td>
                                <td>~10ms</td>
                                <td>128 bytes</td>
                                <td>a × b = c</td>
                            </tr>
                            <tr>
                                <td>Cubic Polynomial</td>
                                <td>~8</td>
                                <td>~15ms</td>
                                <td>128 bytes</td>
                                <td>ax³ + bx² + cx + d</td>
                            </tr>
                            <tr>
                                <td>Range Proof</td>
                                <td>~60</td>
                                <td>~50ms</td>
                                <td>128 bytes</td>
                                <td>age ≥ 18</td>
                            </tr>
                            <tr>
                                <td>Merkle Membership</td>
                                <td>~2,400</td>
                                <td>~500ms</td>
                                <td>128 bytes</td>
                                <td>Leaf in tree</td>
                            </tr>
                            <tr>
                                <td>ZK-Rollup Batch</td>
                                <td>~200,000</td>
                                <td>~2-5 min</td>
                                <td>~200 bytes</td>
                                <td>100 transactions</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="diagram-explanation">
                    <h4>Complexity Trends</h4>
                    <ul>
                        <li><strong>Linear Growth:</strong> More complex computations = more constraints</li>
                        <li><strong>Prover Time:</strong> Scales with circuit size (~O(n log n))</li>
                        <li><strong>Verification Time:</strong> Constant (~10ms) regardless of circuit size</li>
                        <li><strong>Proof Size:</strong> Constant (128 bytes for Groth16)</li>
                    </ul>
                </div>

                <div class="diagram-nav">
                    <a href="#verification-equation" class="prev-diagram">← Previous</a>
                    <a href="#batch-verification" class="next-diagram">Next Diagram →</a>
                </div>
            </section>

            <!-- Diagram 7: Batch Verification -->
            <section id="batch-verification" class="diagram-section">
                <div class="diagram-header">
                    <h3>7. Batch Verification Architecture</h3>
                    <p class="diagram-desc">How multiple proofs can be verified efficiently.</p>
                </div>

                <div class="diagram-content">
                    <pre class="mermaid-placeholder">
graph LR
    P1[Proof 1] --> Aggregate
    P2[Proof 2] --> Aggregate
    P3[Proof 3] --> Aggregate
    PN[Proof N] --> Aggregate

    Aggregate --> Batch[Batch Verify]
    Batch --> Result[Single Check]

    style P1 fill:#e1f5ff
    style P2 fill:#e1f5ff
    style P3 fill:#e1f5ff
    style PN fill:#e1f5ff
    style Result fill:#c8e6c9
                    </pre>
                </div>

                <div class="diagram-explanation">
                    <h4>Batch Verification Benefits</h4>
                    <ul>
                        <li><strong>O(1) Verification:</strong> Check N proofs with single pairing equation</li>
                        <li><strong>Random Scalars:</strong> Sample r₁, r₂, ..., rₙ for each proof</li>
                        <li><strong>Aggregation:</strong> e(Σ rᵢ·Aᵢ, Σ Bᵢ) = Π e(rᵢ·Aᵢ, rᵢ·Bᵢ)</li>
                        <li><strong>Performance:</strong> ~10ms regardless of batch size (vs 10ms×N for individual)</li>
                    </ul>
                    <p><strong>Real-World Impact:</strong> Critical for ZK-rollups verifying hundreds of transactions per batch.</p>
                </div>

                <div class="diagram-nav">
                    <a href="#circuit-comparison" class="prev-diagram">← Previous</a>
                    <span></span>
                </div>
            </section>
        </main>

        <footer>
            <p>Architecture Viewer | ZK-SNARK Learning Journey</p>
            <a href="index.html">← Back to Portfolio</a>
        </footer>
    </div>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Highlight current section in TOC on scroll
        const sections = document.querySelectorAll('.diagram-section');
        const tocLinks = document.querySelectorAll('.toc a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
